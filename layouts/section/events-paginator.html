{{ define "main" }}
<!-- Variables -->
{{ $paginator := .Paginator.Pages }}
{{ $pages := .Sections | union .Pages }}
<!-- Upcoming Events-->
{{ $upcomingEvents := where $pages "Date" "ge" now }}
{{ $upcomingEventsAllNumber := 0 }}
{{ $upcomingEventsAll := where $pages "Date" "ge" now }}
{{ range $upcomingEventsAll }}
{{ $upcomingEventsAllNumber = add $upcomingEventsAllNumber 1 }}
{{ end }}
<!-- Past Events -->
{{ $pastEvents := where $paginator "Date" "lt" now }}
{{ $pastEventsAllNumber := 0 }}
{{ $pastEventsAll := where $pages "Date" "lt" now }}
{{ range $pastEventsAll }}
{{ $pastEventsAllNumber = add $pastEventsAllNumber 1 }}
{{ end }}
<!-- Hero -->
{{ partial "content/hero/hero.html" . }}
<!-- Page -->
<section class="section page">
  <div class="container">
    <!-- Breadcrumbs -->
    {{ partial "content/custom/breadcrumbs.html" . }}
    <!-- Content -->
    {{ partial "content/_index.html" . }}
    {{ $paginator }}
    <!-- Upcoming Events -->
    {{ if ge $upcomingEventsAllNumber 1 }}
    <div class="content mt-2">
      <h2><span class="mr-sm">⏳️</span>{{ $upcomingEventsAllNumber }} upcoming {{ cond (eq $upcomingEventsAllNumber 1) "event" "events" }}</h2>
    </div>
    <div class="columns is-multiline">
      {{ range $upcomingEvents.ByDate }}
      {{ partial "content/child.html" . }}
      {{ end }}
    </div>
    {{ else }}
    <div class="content mt-2">
      <p><strong>No upcoming events right now - check back again later!</strong></p>
    </div>
    {{ end }}
    <!-- Past Events -->
    <div class="content mt-2">
      <h2><span class="mr-sm">⌛</span>{{ $pastEventsAllNumber }} past events</h2>
    </div>
    <div class="columns is-multiline">
      {{ range $pastEvents.ByDate.Reverse }}
      {{ partial "content/child.html" . }}
      {{ end }}
    </div>
    <div class="mt-2">
      {{ partial "content/custom/paginator.html" . }}
    </div>
    <!-- Content Footer -->
    {{ partial "content/footer/_index.html" . }}
  </div>
</section>
{{ end }}
